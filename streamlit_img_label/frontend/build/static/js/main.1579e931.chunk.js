(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports={dark:"StreamlitImgLabel_dark__14M8f"}},30:function(e,t,a){e.exports=a(46)},42:function(e,t){},43:function(e,t){},44:function(e,t){},46:function(e,t,a){"use strict";a.r(t);var n=a(11),c=a.n(n),r=a(28),o=a.n(r),i=a(6),d=a(13),s=a(9),l=a(25),f=a(22),u=a(20),m=a.n(u),h=Object(l.b)(function(e){var t,a=Object(n.useState)("light"),r=Object(s.a)(a,2),o=r[0],u=r[1],h=Object(n.useState)([]),b=Object(s.a)(h,2),g=b[0],k=b[1],v=Object(n.useState)(new f.fabric.Canvas("")),w=Object(s.a)(v,2),j=w[0],O=w[1],p=e.args,E=p.canvasWidth,C=p.canvasHeight,R=p.imageData,x=Object(n.useState)(0),S=Object(s.a)(x,2),L=S[0],N=S[1],I=document.createElement("canvas"),M=I.getContext("2d");if(I.width=E,I.height=C,M){var y=M.createImageData(E,C);y.data.set(R),M.putImageData(y,0,0),t=I.toDataURL()}else t="";Object(n.useEffect)(function(){var a=e.args,n=a.rects,c=a.boxColor,r=new f.fabric.Canvas("c",{enableRetinaScaling:!1,backgroundImage:t,uniScaleTransform:!0});n.forEach(function(e){var t=e.top,a=e.left,n=e.width,o=e.height;r.add(new f.fabric.Rect({left:a,top:t,fill:"",width:n,height:o,objectCaching:!0,stroke:c,strokeWidth:1,strokeUniform:!0,hasRotatingPoint:!1}))}),k(n.map(function(e){return e.label})),O(r),l.a.setFrameHeight()},[C,E,t]);var D=function(){N(0),j.getObjects().forEach(function(e){return j.remove(e)}),U([])},U=function(e){k(e);var t=j.getObjects().map(function(t,a){return Object(d.a)({},t.getBoundingRect(),{label:e[a]})});l.a.setComponentValue({rects:t})};Object(n.useEffect)(function(){if(j)return j.on("object:modified",function(){j.renderAll(),U(g)}),function(){j.off("object:modified")}});var W=function(e){u(e),"dark"===e?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return Object(n.useEffect)(function(){return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(e){return W(e.matches?"dark":"light")}),W(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),function(){window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",function(){})}},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("canvas",{id:"c",className:"dark"===o?m.a.dark:"",width:E,height:C,style:{width:"100%"}}),c.a.createElement("div",{className:"dark"===o?m.a.dark:""},c.a.createElement("button",{className:"dark"===o?m.a.dark:"",onClick:function(){var t={left:.15*E+3*L,top:.15*C+3*L,width:.2*E,height:.2*C};N(L+1),j.add(new f.fabric.Rect(Object(d.a)({},t,{fill:"",objectCaching:!0,stroke:e.args.boxColor,strokeWidth:1,strokeUniform:!0,hasRotatingPoint:!1}))),U([].concat(Object(i.a)(g),[""]))}},"Add bounding box"),c.a.createElement("button",{className:"dark"===o?m.a.dark:"",onClick:function(){var e=j.getActiveObject(),t=j.getObjects().indexOf(e);j.remove(e),U(g.filter(function(e,a){return a!==t}))}},"Remove select"),c.a.createElement("button",{className:"dark"===o?m.a.dark:"",onClick:function(){D();var t=e.args,a=t.rects,n=t.boxColor;a.forEach(function(e){var t=e.top,a=e.left,c=e.width,r=e.height;j.add(new f.fabric.Rect({left:a,top:t,fill:"",width:c,height:r,objectCaching:!0,stroke:n,strokeWidth:1,strokeUniform:!0,hasRotatingPoint:!1}))}),U(g)}},"Reset"),c.a.createElement("button",{className:"dark"===o?m.a.dark:"",onClick:D},"Clear all")))});o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(h,null)),document.getElementById("root"))}},[[30,2,1]]]);
//# sourceMappingURL=main.1579e931.chunk.js.map